SOCKOBJS = socket.o serial.o slp.o padp.o \
       dlp.o cmp.o syspkt.o\
       sync.o pi-file.o

FILEOBJS = pi-file.o

APPOBJS = datebook.o memo.o address.o todo.o expense.o mail.o sync.o

UTILOBJS = utils.o

OBJS = $(SOCKOBJS) $(FILEOBJS) $(APPOBJS) $(UTILOBJS)

CC = @CC@
CFLAGS = @CFLAGS@ @CWFLAG@ -I../include
# -DNO_SERIAL_TRACE
# -DDLP_TRACE
# -DPADP_TRACE
# -DDEBUG
AR = ar
ARFLAGS = @ARFLAGS@
RANLIB = @RANLIB@
RM = rm -f

all: libpisock.a

libpisock.a: $(OBJS)
	$(RM) libpisock.a
	$(AR) $(ARFLAGS) libpisock.a $(OBJS)
	$(RANLIB) libpisock.a

clean:
	$(RM) *.o *.a *~ core a.out *.orig

depend:
	perl -i~ -ne 'print if 1../^#Depend/' Makefile.in ; gcc -MM -I../include *.c >> Makefile.in

#Dependencies
address.o: address.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-address.h
cmp.o: cmp.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-padp.h \
 ../include/pi-cmp.h ../include/pi-serial.h
datebook.o: datebook.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-datebook.h
dlp.o: dlp.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h
expense.o: expense.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-expense.h
mail.o: mail.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-mail.h
memo.o: memo.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-memo.h
padp.o: padp.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-padp.h \
 ../include/pi-slp.h ../include/pi-serial.h
pi-file.o: pi-file.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-file.h \
 ../include/pi-dlp.h
serial.o: serial.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-serial.h \
 ../include/pi-slp.h
slp.o: slp.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-slp.h
socket.o: socket.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-serial.h \
 ../include/pi-padp.h ../include/pi-cmp.h ../include/pi-dlp.h \
 ../include/pi-syspkt.h
sync.o: sync.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-sync.h
syspkt.o: syspkt.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-syspkt.h \
 ../include/pi-slp.h ../include/pi-serial.h
todo.o: todo.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h ../include/pi-dlp.h \
 ../include/pi-todo.h
utils.o: utils.c ../include/pi-source.h ../include/pi-config.h \
 ../include/pi-socket.h ../include/pi-macros.h
